<html>
<head>
    <title>Web Socket Test</title>
    <link rel="stylesheet" href="http://getbootstrap.com/dist/css/bootstrap.min.css" />
    </head>
<body>
<script type="text/javascript">
    var socket;
    if (!window.WebSocket) {
      window.WebSocket = window.MozWebSocket;
    }
    if (window.WebSocket) {
      socket = new WebSocket("${websocket-location}");
      socket.onmessage = function(event) {
        var ta = document.getElementById('responseText');
        ta.value = event.data;
                                  if(event.data == "play"){
                                        player.playVideo();
                                  }
                                  else if(event.data == "pause"){
                                        player.pauseVideo();
                                  }
    else if(event.data.indexOf("currentTime") > -1) {
    if(document.getElementById('play').currentTime == event.data.substring(12)){}
    else {document.getElementById('play').currentTime = event.data.substring(12);}
    }
      };
      socket.onopen = function(event) {
        var ta = document.getElementById('responseText');
        ta.value = "Web Socket opened!";
      };
      socket.onclose = function(event) {
        var ta = document.getElementById('responseText');
        ta.value = ta.value + "Web Socket closed";
      };
    } else {
      alert("Your browser does not support Web Socket.");
    }
    function send(message) {
      if (!window.WebSocket) { return; }
      if (socket.readyState == WebSocket.OPEN) {
        socket.send(message);
      } else {
        alert("The socket is not open.");
      }
    }
                                function onPlay(){
                                    send("play");
                                }
                                function onPause(){
                                    send("pause");
                                }
    function onSeeked(){
        send("currentTime=" + document.getElementById('play').currentTime);
    }
</script>
<form onsubmit="return false;">
<input type="text" name="message" value="Hello, World!"/>
<input type="button" value="Send Web Socket Data" onclick="send(this.form.message.value)" />
<h3>Output</h3>
<textarea id="responseText" style="width:500px;height:300px;"></textarea>
</form>

<div id="player"></div>
<script type="text/javascript">
      // 2. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. This function creates an iframe (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: 'LBr7kECsjcQ',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }

      // 4. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
      }

      // 5. The API calls this function when the player's state changes.
      //    The function indicates that when playing a video (state=1),
      //    the player should play for six seconds and then stop.
      function onPlayerStateChange(event) {

        switch (player.getPlayerState()) {
    case -1:
        break;
    case 0:
        break;
    case 1:
        onPlay();
        break;
    case 2:
        onPause();
        break;
    case 3:
        break;
    case 5:
        break;        
}      }
</script>
</body>
</html>